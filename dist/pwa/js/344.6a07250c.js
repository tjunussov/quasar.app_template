"use strict";(self["webpackChunkinstore_tastamat_com"]=self["webpackChunkinstore_tastamat_com"]||[]).push([[344],{301:(e,a,t)=>{t.d(a,{Z:()=>u});var n=t(5724),l=t(499),r=t(4688);const o={printLabel(e){return n.T.print(),new Promise(((a,t)=>{window.cordova.plugins.printer.print(a,(e=>{t("Printing failed: "+e)}),e)}))},scanOCR(e,a){return new Promise(((t,n)=>{window.cordova.plugins.ocr.scan(t,(e=>{n("Scanning failed: "+e)}),{ocrType:e,aspectRatio:1,mock:a})}))},scanBarcode(e){return new Promise(((a,t)=>{window.cordova.plugins.barcodeScanner.scan(a,(e=>{t("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"Place a barcode inside the scan area",resultDisplayDuration:0,formats:"EAN_13",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1,mock:e})}))}};function i(e,a,t,r){let o=1;const i=setInterval((()=>{o--,0==o&&(c.update({message:`Scanned code ${t&&t.text?t.text:t} <code>${t.raw?t.raw+"</code>":""} `}),clearInterval(i),setTimeout(c.hide,1e3),e(t),n.T.scaned())}),1e3),c=l.Z.create({title:`${r.mock.label} ${r.type||"barcode"} scanner`,message:"Scanning ...",html:!0}).onOk((()=>{clearInterval(i),e(t)}))}function c(e){var a=null!=localStorage.getItem(e)?localStorage.getItem(e):String(Math.ceil(1e5*Math.random()));return localStorage.setItem(e,a),a}console.debug("useQuasar.Platform",r.ZP.is),r.ZP.is.cordova||(window.cordova={plugins:{barcodeScanner:{scan:function(e,a,t){var n=t.mock.defaultValue||c(t.mock.label);i(e,a,n,t)}},ocr:{scan:function(e,a,t){var n={text:t.mock.defaultValue||c(t.mock.label),raw:"989079909 351 PM 583071708 OD 7 Days Chocolate Croissant 55 Gm AED 1.90 Almarai Milk Premium Mango 250 M o/n AED 2.65 Almarai Milk Premium Strawberry 250 MI 0/2 AED 2.60"};t.type="ocr",i(e,a,n,t)}},printer:{print:function(e,a,t){console.debug("mock cordova print",t),window.setTimeout((()=>{window.print(),e()}),500)}}}});const u=o},6918:(e,a,t)=>{t.d(a,{Z:()=>s});var n=t(3673);function l(e,a,t,l,r,o){const i=(0,n.up)("r-btn"),c=(0,n.up)("q-input");return(0,n.wg)(),(0,n.j4)(c,{label:e.label,Zsize:"lg",ref:"input",Zoutlined:"",modelValue:e.input,"onUpdate:modelValue":a[1]||(a[1]=a=>{e.input=a,e.$emit("update:modelValue",e.input)}),Zrules:"[ val => val.length >= LENGTH || 'Please use minimum '+LENGTH+' characters' ]"},{append:(0,n.w5)((()=>[(0,n.Wm)(i,{icon:"barcode"==e.type?e.mdiBarcodeScan:"camera_alt",ref:"btn",color:"grey",onClick:a[0]||(a[0]=a=>"ocr"==e.type?e.scanOCR(a):e.scanBarcode(a))},null,8,["icon"])])),_:1},8,["label","modelValue"])}var r=t(301),o=(t(5724),t(488));const i=(0,n.aZ)({created(){this.mdiBarcodeScan=o.Al3},name:"InputLabel",props:{label:{type:String,default:"Default"},length:{type:String,default:1},modelValue:String,extract:{type:String,default:"#"},message:{type:String,default:"Please scan screen"},type:{type:String,default:"ocr"},prefix:{type:String,default:""},defaultValue:String,disabled:{type:Boolean,default:!1}},watch:{modelValue(e){this.input=e}},data(){return{input:"",mdiBarcodeScan:null}},mounted(){"barcode"==this.type&&this.$bus.$on("keyboard:keydown:enter"+(this.prefix?":"+this.prefix:""),this.keyboardBarcode)},beforeUnmount(){"barcode"==this.type&&this.$bus.$off("keyboard:keydown:enter"+(this.prefix?":"+this.prefix:""),this.keyboardBarcode)},emits:["update:modelValue","data","blur"],methods:{scanOCR(){r.Z.scanOCR(this.extract,{label:this.label,defaultValue:this.defaultValue}).then((e=>{console.debug("$cordovaApi.scanOCR",e),this.input=e.text?e.text:e,e&&e.raw&&this.$emit("data",e),this.$emit("update:modelValue",this.input),this.defocus()}))},scanBarcode(e){r.Z.scanBarcode({label:this.label,defaultValue:this.defaultValue}).then((a=>{console.debug("$cordovaApi.scanBarcode",a),this.input=a,this.$emit("update:modelValue",this.input),this.defocus(e)}))},keyboardBarcode(e){this.input=e,this.$emit("update:modelValue",this.input),this.defocus()},defocus(e){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.focus(),document.body.focus()}}});var c=t(1206),u=t(7518),d=t.n(u);i.render=l;const s=i;d()(i,"components",{QInput:c.Z})},7344:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var n=t(3673);const l=(0,n.Uk)("Ride"),r={class:"q-gutter-y-md full-width"},o=(0,n.Uk)("Check In "),i=(0,n.Uk)("Ride");function c(e,a,t,c,u,d){const s=(0,n.up)("InputScan"),m=(0,n.up)("q-card-section"),p=(0,n.up)("r-btn"),b=(0,n.up)("q-card-actions"),h=(0,n.up)("r-card"),f=(0,n.up)("q-page"),g=(0,n.up)("layout");return(0,n.wg)(),(0,n.j4)(g,{class:"max-width"},{header:(0,n.w5)((()=>[l])),default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"q-pa-lg flex flex-center"},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"Tracking Number",type:"ocr",extract:"ocr_rider",modelValue:e.trackingNumber,"onUpdate:modelValue":a[0]||(a[0]=a=>e.trackingNumber=a),length:"9",onData:e.multiData},null,8,["modelValue","onData"])])),_:1}),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onClick:e.riderCheckIn,"text-color":"primary",outline:"",disabled:!e.trackingNumber},{default:(0,n.w5)((()=>[o])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{label:"Label Number",type:"barcode",prefix:"L",modelValue:e.labelNumber,"onUpdate:modelValue":a[1]||(a[1]=a=>e.labelNumber=a),length:"4"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onClick:e.ride,disabled:!e.labelNumber},{default:(0,n.w5)((()=>[i])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])])),_:1})])),_:1})}var u=t(6918),d=t(1629),s=t(7581),m=t(499);const p=(0,n.aZ)({name:"Ride",components:{layout:d.Z,InputScan:u.Z},data(){return{labelNumber:null,trackingNumber:null,raw:null}},methods:{riderCheckIn(){s.W.riderCheckIn(this.trackingNumber,this.raw).then((e=>{this.clear(),console.log("resp",e),e.waiting||m.Z.create({title:`${e.trackingNumber} packing done!`,message:`Please pick your order from <h4>${e.cellCode}</h4>`,html:!0})}))},multiData(e){this.raw=e.raw},ride(){s.W.ride(this.labelNumber).then((e=>{this.clear()}))},clear(){this.labelNumber=null,this.trackingNumber=null,localStorage.removeItem("Tracking Number"),localStorage.removeItem("Label Number")}}});var b=t(4379),h=t(5589),f=t(9367),g=t(7518),w=t.n(g);p.render=c;const k=p;w()(p,"components",{QPage:b.Z,QCardSection:h.Z,QCardActions:f.Z})}}]);