"use strict";(self["webpackChunkinstore_tastamat_com"]=self["webpackChunkinstore_tastamat_com"]||[]).push([[584],{3933:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(3673),n=a(2323),l=a(8880);const i=(0,s.Uk)("Dashboard"),r={key:0,class:"col q-pl-xs q-gutter-xs"},u=(0,s._)("div",{class:"q-mt-md"},"No rider is waiting ... ",-1);function o(e,t,a,o,c,d){const m=(0,s.up)("r-empty"),w=(0,s.up)("q-tab"),p=(0,s.up)("q-tabs"),g=(0,s.up)("ticket"),h=(0,s.up)("q-page"),b=(0,s.up)("q-icon"),f=(0,s.up)("q-item-label"),k=(0,s.up)("layout");return(0,s.wg)(),(0,s.j4)(k,{dark:""},{header:(0,s.w5)((()=>[i])),footer:(0,s.w5)((()=>[(0,s.Wm)(m)])),default:(0,s.w5)((()=>[c.queue.length?((0,s.wg)(),(0,s.j4)(h,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{align:"justify"},{default:(0,s.w5)((()=>[d.isWait?((0,s.wg)(),(0,s.j4)(w,{key:0,label:"Waiting"})):(0,s.kq)("",!0),(0,s.Wm)(w,{label:"Done"})])),_:1}),(0,s._)("div",{class:(0,n.C_)(["row",{blink:c.blink}])},[d.isWait?((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(l.W3,{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated fadeOut"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.waitQueue,(e=>((0,s.wg)(),(0,s.j4)(g,{class:"bg-primary",key:e.trackingNumber,t:e},null,8,["t"])))),128))])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",{class:(0,n.C_)(["col q-px-xs q-gutter-xs",{"grid-container":!d.isWait}])},[(0,s.Wm)(l.W3,{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated fadeOut"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.doneQueue,(e=>((0,s.wg)(),(0,s.j4)(g,{class:"bg-dark",key:e.trackingNumber,t:e},null,8,["t"])))),128))])),_:1})],2)],2)])),_:1})):((0,s.wg)(),(0,s.j4)(h,{key:1,class:"flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"text-h6 text-weight-bold text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{name:"mood",size:"65px"}),u])),_:1})])),_:1}))])),_:1})}var c=a(7581),d=a(5724),m=a(8130);const w={class:"text-weight-bold"},p={color:"black","text-color":"white",outline:"",dense:"",size:"lg"};function g(e,t,a,l,i,r){const u=(0,s.up)("q-chip"),o=(0,s.up)("q-item-label"),c=(0,s.up)("q-icon"),d=(0,s.up)("q-item-section"),m=(0,s.up)("q-item");return(0,s.wg)(),(0,s.j4)(m,{class:"ticket no-border-radius q-pa-none",unelevated:"",Zoutline:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"q-pa-md q-px-md",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{class:"text-h6"},{default:(0,s.w5)((()=>[a.t.referenceNumber?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"text-h6 q-ml-none",color:"primary","text-color":"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("#"+(0,n.zw)(a.t.referenceNumber),1)])),_:1})):(0,s.kq)("",!0),(0,s._)("span",w,(0,n.zw)(a.t.trackingNumber),1)])),_:1}),(0,s.Wm)(o,{class:"text-grey-6 text-small"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"schedule"}),(0,s.Uk)((0,n.zw)(e.$format(a.t.created,"HH:mm")),1)])),_:1})])),_:1}),(0,s.Wm)(d),(0,s.Wm)(d,{class:"bg-grey-9 q-pl-none",side:"",Ztop:""},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{class:"text-h6 q-pr-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"ticket-arrow",name:"arrow_right",size:"54px"}),(0,s._)("span",p,(0,n.zw)(a.t.cellCode?a.t.cellCode:"WAIT..."),1)])),_:1})])),_:1})])),_:1})}const h={name:"DashboardTicket",props:["t"]};var b=a(3414),f=a(2035),k=a(2350),q=a(7030),_=a(4554),W=a(7518),x=a.n(W);h.render=g;const y=h;x()(h,"components",{QItem:b.Z,QItemSection:f.Z,QItemLabel:k.Z,QChip:q.Z,QIcon:_.Z});let v=null;const Q={name:"Dashboard",data(){return{blink:!1,queue:[]}},computed:{isWait(){return this.waitQueue.length>0},doneQueue(){return this.queue.filter((e=>!e.waiting))},waitQueue(){return this.queue.filter((e=>e.waiting))}},created(){this.dash(),this.$q.dark.set(!0),v=window.setInterval(this.dash,5e3)},beforeUnmount(){console.debug("beforeDestroy",v),this.$q.dark.set(!1),window.clearInterval(v)},components:{layout:m.Z,ticket:y},methods:{dash(){this.blink=!0,c.W.dashboard().then((e=>{console.debug("$api.dashboard","resp->"),this.processSound(e),this.blink=!1,this.queue=e.data}))},processSound(e){Z(this.queue,e.data)&&(this.queue.length>e.data.length?d.T.dequeue():d.T.enqueue())}}};function Z(e,t){return JSON.stringify(e)!=JSON.stringify(t)}var I=a(4379),D=a(2496),j=a(8408);Q.render=o;const N=Q;x()(Q,"components",{QPage:I.Z,QTabs:D.Z,QTab:j.Z,QItemLabel:k.Z,QIcon:_.Z})}}]);