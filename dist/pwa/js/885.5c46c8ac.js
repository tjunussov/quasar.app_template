"use strict";(self["webpackChunkinstore_tastamat_com"]=self["webpackChunkinstore_tastamat_com"]||[]).push([[885],{9885:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var s=a(3673),i=a(2323),n=a(8880);const l=(0,s.Uk)("Dashboard"),r={key:0,class:"col q-pl-xs q-gutter-xs"},o=(0,s._)("div",{class:"q-mt-md"},"No rider is waiting ... ",-1);function u(e,t,a,u,c,d){const m=(0,s.up)("r-btn"),p=(0,s.up)("r-empty"),h=(0,s.up)("q-tab"),w=(0,s.up)("q-tabs"),g=(0,s.up)("ticket"),k=(0,s.up)("q-page"),b=(0,s.up)("q-icon"),f=(0,s.up)("q-item-label"),q=(0,s.up)("layout");return(0,s.wg)(),(0,s.j4)(q,{dark:""},{header:(0,s.w5)((()=>[l])),"header-right":(0,s.w5)((()=>[(0,s.Wm)(m,{icon:"volume_up",onClick:t[0]||(t[0]=e=>d.say("1 2 3 4","pick from box 3"))})])),footer:(0,s.w5)((()=>[(0,s.Wm)(p)])),default:(0,s.w5)((()=>[c.queue.length?((0,s.wg)(),(0,s.j4)(k,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{align:"justify"},{default:(0,s.w5)((()=>[d.isWait?((0,s.wg)(),(0,s.j4)(h,{key:0,label:"Waiting"})):(0,s.kq)("",!0),(0,s.Wm)(h,{label:"Done"})])),_:1}),(0,s._)("div",{class:(0,i.C_)(["row",{blink:c.blink}])},[d.isWait?((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(n.W3,{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated fadeOut"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.waitQueue,(e=>((0,s.wg)(),(0,s.j4)(g,{class:"bg-primary",key:e.trackingNumber,t:e},null,8,["t"])))),128))])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",{class:(0,i.C_)(["col q-px-xs q-gutter-xs",{"grid-container":!d.isWait}])},[(0,s.Wm)(n.W3,{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated fadeOut"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.doneQueue,(e=>((0,s.wg)(),(0,s.j4)(g,{class:"bg-dark",key:e.trackingNumber,t:e},null,8,["t"])))),128))])),_:1})],2)],2)])),_:1})):((0,s.wg)(),(0,s.j4)(k,{key:1,class:"flex flex-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"text-h6 text-weight-bold text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{name:"mood",size:"65px"}),o])),_:1})])),_:1}))])),_:1})}var c=a(7581),d=a(5724),m=a(1629);const p={class:"text-weight-bold"},h={color:"black","text-color":"white",outline:"",dense:"",size:"lg"};function w(e,t,a,n,l,r){const o=(0,s.up)("q-chip"),u=(0,s.up)("q-item-label"),c=(0,s.up)("q-icon"),d=(0,s.up)("q-item-section"),m=(0,s.up)("q-item");return(0,s.wg)(),(0,s.j4)(m,{class:"ticket no-border-radius q-pa-none",unelevated:"",Zoutline:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"q-pa-md q-px-md",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"text-h6"},{default:(0,s.w5)((()=>[a.t.referenceNumber?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"text-h6 q-ml-none",color:"primary","text-color":"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("#"+(0,i.zw)(a.t.referenceNumber),1)])),_:1})):(0,s.kq)("",!0),(0,s._)("span",p,(0,i.zw)(a.t.trackingNumber),1)])),_:1}),(0,s.Wm)(u,{class:"text-grey-6 text-small"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:"schedule"}),(0,s.Uk)((0,i.zw)(e.$format(a.t.created,"HH:mm")),1)])),_:1})])),_:1}),(0,s.Wm)(d),(0,s.Wm)(d,{class:"bg-grey-9 q-pl-none",side:"",Ztop:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"text-h6 q-pr-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"ticket-arrow",name:"arrow_right",size:"54px"}),(0,s._)("span",h,(0,i.zw)(a.t.cellCode?a.t.cellCode:"WAIT..."),1)])),_:1})])),_:1})])),_:1})}const g={name:"DashboardTicket",props:["t"]};var k=a(3414),b=a(2035),f=a(2350),q=a(7030),_=a(4554),v=a(7518),W=a.n(v);g.render=w;const x=g;W()(g,"components",{QItem:k.Z,QItemSection:b.Z,QItemLabel:f.Z,QChip:q.Z,QIcon:_.Z});let y=null;const Q={name:"Dashboard",data(){return{blink:!1,optionsVoice:[],nospeak:!0,queue:[]}},computed:{isWait(){return this.waitQueue.length>0},doneQueue(){return this.queue.filter((e=>!e.waiting))},waitQueue(){return this.queue.filter((e=>e.waiting))}},created(){this.dash(),this.$q.dark.set(!0),y=window.setInterval(this.dash,5e3)},mounted(){this.setVoices()},beforeUnmount(){console.debug("beforeDestroy",y),this.$q.dark.set(!1),window.clearInterval(y)},components:{layout:m.Z,ticket:x},methods:{dash(){this.blink=!0,c.W.dashboard().then((e=>{this.processSound(e),this.blink=!1,this.queue=e.data}))},processSound(e){if(I(this.queue,e.data))if(this.queue.length>e.data.length)d.T.dequeue();else{var t=e.data[0];t&&this.nospeak&&(this.nospeak=!1,this.say(t.trackingNumber||t.referenceNumber,t.cellCode?"pick from box "+t.cellCode:"please wait").then((()=>{this.nospeak=!0}))),d.T.enqueue()}},say(e,t){return this.$speechTalk("en-GB",`Order number ${String(e).split("").join(" ")} ${t}`)},setVoices(){let e=setInterval((()=>{0===this.optionsVoice.length?this.voicesList():clearInterval(e)}),50)},voicesList(){let e=window.speechSynthesis;this.optionsVoice=e.getVoices().map((e=>({label:e.name,value:e.lang})))}}};function I(e,t){return JSON.stringify(e)!=JSON.stringify(t)}var Z=a(4379),j=a(2496),C=a(8408);Q.render=u;const D=Q;W()(Q,"components",{QPage:Z.Z,QTabs:j.Z,QTab:C.Z,QItemLabel:f.Z,QIcon:_.Z})}}]);