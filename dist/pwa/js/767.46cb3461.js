"use strict";(self["webpackChunkinstore_tastamat_com"]=self["webpackChunkinstore_tastamat_com"]||[]).push([[767],{301:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(5724),n=a(499),l=a(4688);const i={printLabel(e,t){return r.T.print(),new Promise(((a,r)=>{window.cordova.plugins.printer.print(a,(e=>{r("Printing failed: "+e)}),e,t)}))},printerList(){return new Promise(((e,t)=>{window.cordova.plugins.printer.list(e,(e=>{t("Printer List failed: "+e)}))}))},scanOCR(e,t){return new Promise(((a,r)=>{window.cordova.plugins.ocr.scan(a,(e=>{r("Scanning failed: "+e)}),{ocrType:e,aspectRatio:1,mock:t})}))},scanBarcode(e){return new Promise(((t,a)=>{window.cordova.plugins.barcodeScanner.scan(t,(e=>{a("Scanning failed: "+e)}),{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"Place a barcode inside the scan area",resultDisplayDuration:0,formats:"EAN_13",orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1,mock:e})}))}};function o(e,t,a,l){let i=1;const o=setInterval((()=>{i--,0==i&&(s.update({message:`Scanned code ${a&&a.text?a.text:a} <code>${a.raw?a.raw+"</code>":""} `}),clearInterval(o),setTimeout(s.hide,1e3),e(a),r.T.scaned())}),1e3),s=n.Z.create({title:`${l.mock.label} ${l.type||"barcode"} scanner`,message:"Scanning ...",html:!0}).onOk((()=>{clearInterval(o),e(a)}))}function s(e){var t=null!=localStorage.getItem(e)?localStorage.getItem(e):String(Math.ceil(1e5*Math.random()));return localStorage.setItem(e,t),t}console.debug("useQuasar.Platform",l.ZP.is),l.ZP.is.cordova||(window.cordova={plugins:{barcodeScanner:{scan:function(e,t,a){var r=a.mock.defaultValue||s(a.mock.label);o(e,t,r,a)}},ocr:{scan:function(e,t,a){var r={text:a.mock.defaultValue||s(a.mock.label),raw:"989079909 351 PM 583071708 OD 7 Days Chocolate Croissant 55 Gm AED 1.90 Almarai Milk Premium Mango 250 M o/n AED 2.65 Almarai Milk Premium Strawberry 250 MI 0/2 AED 2.60"};a.type="ocr",o(e,t,r,a)}},printer:{print:function(e,t,a,r){console.debug("mock cordova print",a,r),window.setTimeout((()=>{window.print(),e()}),500)},list:function(e,t,a){console.debug("mock cordova printList",a),window.setTimeout((()=>{e([{address:"18:04:ED:6B:13:D4",name:"XXRBJ200701857"},{address:"18:04:ED:6B:13:D4",name:"Bluetooth Printer"}])}),500)}}}});const u=i},3881:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(3673);function n(e,t,a,n,l,i){const o=(0,r.up)("r-btn"),s=(0,r.up)("q-input");return(0,r.wg)(),(0,r.j4)(s,{label:e.label,Zsize:"lg",ref:"input",Zoutlined:"",modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=t=>{e.input=t,e.$emit("update:modelValue",e.input)}),Zrules:"[ val => val.length >= LENGTH || 'Please use minimum '+LENGTH+' characters' ]"},{append:(0,r.w5)((()=>[(0,r.Wm)(o,{icon:"barcode"==e.type?e.mdiBarcodeScan:"camera_alt",ref:"btn",color:"grey",onClick:t[0]||(t[0]=t=>"ocr"==e.type?e.scanOCR(t):e.scanBarcode(t))},null,8,["icon"])])),_:1},8,["label","modelValue"])}var l=a(301),i=(a(5724),a(488));const o=(0,r.aZ)({created(){this.mdiBarcodeScan=i.Al3},name:"InputLabel",props:{label:{type:String,default:"Default"},length:{type:String,default:1},modelValue:String,extract:{type:String,default:"#"},message:{type:String,default:"Please scan screen"},type:{type:String,default:"ocr"},prefix:{type:String,default:""},defaultValue:String,disabled:{type:Boolean,default:!1}},watch:{modelValue(e){this.input=e}},data(){return{input:"",mdiBarcodeScan:null}},mounted(){"barcode"==this.type&&this.$bus.$on("keyboard:keydown:enter"+(this.prefix?":"+this.prefix:""),this.keyboardBarcode)},beforeUnmount(){"barcode"==this.type&&this.$bus.$off("keyboard:keydown:enter"+(this.prefix?":"+this.prefix:""),this.keyboardBarcode)},emits:["update:modelValue","data","blur"],methods:{scanOCR(){l.Z.scanOCR(this.extract,{label:this.label,defaultValue:this.defaultValue}).then((e=>{console.debug("$cordovaApi.scanOCR",e),this.input=e.text?e.text:e,e&&e.raw&&this.$emit("data",e),this.$emit("update:modelValue",this.input),this.defocus()}))},scanBarcode(e){l.Z.scanBarcode({label:this.label,defaultValue:this.defaultValue}).then((t=>{console.debug("$cordovaApi.scanBarcode",t),""!=this.prefix&&(t=t.substr(1)),this.input=t,this.$emit("update:modelValue",this.input),this.defocus(e)}))},keyboardBarcode(e){this.input=e,this.$emit("update:modelValue",this.input),this.defocus()},defocus(e){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),window.focus(),document.body.focus()}}});var s=a(1206),u=a(7518),c=a.n(u);o.render=n;const d=o;c()(o,"components",{QInput:s.Z})},4767:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var r=a(3673),n=a(2323),l=a(8880);const i=(0,r.Uk)("Pick"),o={class:"q-gutter-y-md full-width"},s=(0,r.Uk)("Print "),u=(0,r.Uk)("Status "),c={class:"text-weight-bold"},d=(0,r.Uk)("Use Label"),m=(0,r.Uk)("Pick");function p(e,t,a,p,b,h){const w=(0,r.up)("orderHistory"),g=(0,r.up)("r-btn"),f=(0,r.up)("q-item-label"),k=(0,r.up)("print"),v=(0,r.up)("r-dialog"),y=(0,r.up)("InputScan"),_=(0,r.up)("q-card-section"),S=(0,r.up)("q-checkbox"),P=(0,r.up)("q-slide-transition"),x=(0,r.up)("q-card-actions"),N=(0,r.up)("r-card"),Z=(0,r.up)("q-page"),q=(0,r.up)("layout");return(0,r.wg)(),(0,r.j4)(q,{class:"max-width"},{header:(0,r.w5)((()=>[i])),list:(0,r.w5)((()=>[(0,r.Wm)(w,{hist:e.hist,onOpen:e.recover,onClear:t[0]||(t[0]=t=>e.hist=null)},null,8,["hist","onOpen"])])),default:(0,r.w5)((()=>[(0,r.Wm)(Z,{class:"q-pa-lg flex flex-center"},{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(v,{modelValue:e.showPrintDialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.showPrintDialog=t),onHide:e.clear,title:"Pick",message:e.order?e.order.result:"",timeout:1e4,onTimeout:e.print},(0,r.Nv)({details:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[u,(0,r._)("span",c,(0,n.zw)(e.order?e.order.status:""),1)])),_:1})])),default:(0,r.w5)((()=>[e.$root.selectedPrinter&&!e.useLabel?((0,r.wg)(),(0,r.j4)(k,{key:0,ref:"printRef",data:e.order},null,8,["data"])):(0,r.kq)("",!0)])),_:2},[e.$root.selectedPrinter&&!e.useLabel?{name:"footer",fn:(0,r.w5)((()=>[(0,r.Wm)(g,{onClick:e.print,"text-color":"primary",outline:""},{default:(0,r.w5)((()=>[s])),_:1},8,["onClick"])]))}:void 0]),1032,["modelValue","onHide","message","onTimeout"]),(0,r.Wm)(N,null,{default:(0,r.w5)((()=>[(0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{label:"Tracking Number",type:"ocr",extract:"ocr_picker",modelValue:e.trackingNumber,"onUpdate:modelValue":t[2]||(t[2]=t=>e.trackingNumber=t),length:"9",onData:e.multiData},null,8,["modelValue","onData"])])),_:1}),(0,r.Wm)(_,{class:"q-pa-none q-pl-xs"},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{"onUpdate:modelValue":t[3]||(t[3]=t=>{e.useLabel=t,e.labelNumber=null}),modelValue:e.useLabel||null!=e.labelNumber},{default:(0,r.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(_,null,{default:(0,r.w5)((()=>[(0,r.Wm)(y,{label:"Label Number",type:"barcode",modelValue:e.labelNumber,"onUpdate:modelValue":t[4]||(t[4]=t=>e.labelNumber=t),prefix:"L",length:"4"},null,8,["modelValue"])])),_:1},512),[[l.F8,e.labelNumber||e.useLabel]])])),_:1}),(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onClick:e.pick,disabled:!e.trackingNumber},{default:(0,r.w5)((()=>[m])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])])),_:1})])),_:1})}var b=a(3427);function h(e,t,a,i,o,s){const u=(0,r.up)("q-icon"),c=(0,r.up)("q-item-label"),d=(0,r.up)("q-item-section"),m=(0,r.up)("r-btn"),p=(0,r.up)("q-item"),b=(0,r.up)("q-slide-item"),h=(0,r.up)("q-list"),w=(0,r.up)("q-slide-transition"),g=(0,r.Q2)("ripple");return(0,r.wg)(),(0,r.j4)(w,{duration:500},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(h,{class:"q-pa-xs text-primary",bordered:"",separator:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{onRight:s.onRight,"right-color":"red"},{right:(0,r.w5)((()=>[(0,r.Wm)(u,{name:"clear"})])),default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(p,{clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("open",a.hist))},{default:(0,r.w5)((()=>[a.hist&&a.hist.created?((0,r.wg)(),(0,r.j4)(d,{key:0,class:"text-dark q-pl-sm"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"text-h6 text-weight-bold"},{default:(0,r.w5)((()=>[(0,r.Uk)("Order #"+(0,n.zw)(a.hist.labelNumber),1)])),_:1}),(0,r.Wm)(c,{class:"text-small"},{default:(0,r.w5)((()=>[(0,r.Uk)("Created "+(0,n.zw)(e.$format(a.hist.created,"HH:mm")),1)])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,{side:"",top:""},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{icon:"more_vert"})])),_:1})])),_:1},512),[[g]])])),_:1},8,["onRight"])])),_:1},512),[[l.F8,a.hist&&a.hist.created]])])),_:1})}const w={name:"OrderHistory",props:{hist:Object},emits:["open","clear"],methods:{onRight({reset:e}){e(),this.$emit("clear")}}};var g=a(2471),f=a(7011),k=a(7257),v=a(4554),y=a(3414),_=a(2035),S=a(8240),P=a(2350),x=a(6489),N=a(7518),Z=a.n(N);w.render=h;const q=w;Z()(w,"components",{QSlideTransition:g.Z,QList:f.Z,QSlideItem:k.Z,QIcon:v.Z,QItem:y.Z,QItemSection:_.Z,QBtn:S.Z,QItemLabel:P.Z}),Z()(w,"directives",{Ripple:x.Z});var L=a(3881);const V={key:0,class:"check q-ma-lg bg-white"},W={class:"col ellipsis"},D={class:"col-auto text-caption"},$={class:"barcode"},C={class:"text-h5 text-weight-bold"},B={class:"hidden",id:"printSection"};function I(e,t,a,l,i,o){const s=(0,r.up)("q-card-section");return e.data?((0,r.wg)(),(0,r.iD)("div",V,[(0,r.Wm)(s,{class:"q-pt-xs row no-wrap items-center text-grey"},{default:(0,r.w5)((()=>[(0,r._)("div",W,(0,n.zw)(e.data.trackingNumber),1),(0,r._)("div",D,(0,n.zw)(e.$format(e.data.created,"DD.MM.YYYY  HH:mm:ss")),1)])),_:1}),(0,r.Wm)(s,{class:"q-pt-xs text-center"},{default:(0,r.w5)((()=>[(0,r._)("div",$,(0,n.zw)(e.encode(e.data.labelNumber||e.data.trackingNumber)),1),(0,r._)("div",C,"#"+(0,n.zw)(e.data.labelNumber||e.data.trackingNumber),1)])),_:1}),(0,r._)("pre",B,"`^XA^FO20,20^BY2^BCN,100,Y,N,N^FDL"+(0,n.zw)(this.data.labelNumber||this.data.trackingNumber)+"^FS^XZ`",1)])):(0,r.kq)("",!0)}var Q=a(301),O=a(8625),T=a.n(O),R=new(T());const U=(0,r.aZ)({name:"Print",props:{data:{type:Object,default:{trackingNumber:"1111",created:new Date}}},methods:{print(){var e=this.$root.selectedPrinter;if(!e||!e.address)return this.$q.notify({position:"top",message:"Printer not selected, Please go to settings",type:"negative"}),Promise.resolve();if(console.log("selectedPrinter",e),this.$q.notify({spinner:!0,timeout:1e3,position:"top",message:"Printing Label",color:"primary"}),this.data){var t=document.getElementById("printSection").innerText;return console.debug("Printing",t),Q.Z.printLabel(e.address,t)}},encode(e){return R.encode(e)}}});var H=a(5589);U.render=I,U.__scopeId="data-v-6a25ae6d";const A=U;Z()(U,"components",{QCardSection:H.Z});var E=a(7581);const M=(0,r.aZ)({name:"Pick",components:{layout:b.Z,print:A,orderHistory:q,InputScan:L.Z},created(){var e=localStorage.getItem("printer");null!==e&&(this.$root.selectedPrinter=this.selectedPrinter=JSON.parse(e))},watch:{useLabel(e){e?localStorage.setItem("useLabel",e):localStorage.removeItem("useLabel")}},data(){return{useLabel:null!==localStorage.getItem("useLabel"),labelNumber:null,trackingNumber:null,showPrintDialog:!1,order:null,hist:null,raw:null}},methods:{recover(e){this.labelNumber=e.labelNumber,this.trackingNumber=e.trackingNumber,this.order=e,this.hist=null},clear(){this.labelNumber=null,this.trackingNumber=null,this.useLabel=!1},multiData(e){this.raw=e.raw},pick(){return E.W.pick(this.labelNumber,this.trackingNumber,this.raw).then((e=>{this.showPrintDialog=!0,this.order=this.hist=e}))},print(){this.useLabel||this.$refs.printRef.print().then((()=>{this.showPrintDialog=!1,this.order=null}))}}});var z=a(4379),j=a(5735),F=a(9367);M.render=p;const Y=M;Z()(M,"components",{QPage:z.Z,QItemLabel:P.Z,QCardSection:H.Z,QCheckbox:j.Z,QSlideTransition:g.Z,QCardActions:F.Z})}}]);